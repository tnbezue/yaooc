<!DOCTYPE html>
<html>
<head>
<title>Constructors</title>
<meta name="generator" content="Bluefish 2.2.10" >
<meta name="copyright" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="expires" content="0">
<link href="yaooc.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="yaooc.js"></script>
</head>
<body>
<div id="wrapper">
<script>header();</script>
<script>menu();</script>
<div id="content" class="content">
<div style="overflow-y: scroll; height:900px">
<h2>Construtors</h2>
<p>
In this chapter three constructors for my_string class will be created.  The arguments to a constructor is a pointer to the object
being initialized and a va_list of variables used to initialize the object.
</p>
<p></p>   
For my_string class, the first constructor initializes my_string object using n characters of the supplied string.
</p>
<pre><code>
  /* Uses n characters of string to initilize object */
  void my_string_ctor_ccs_size(pointer p,va_list args)
  {
    my_string_pointer this=p;
    const char* str=va_arg(args,const char*);
    size_t n = va_arg(args,size_t);
    my_string_default_ctor(p);
    if(str != NULL) {
      if(n > strlen(str))
        n=strlen(str);
      if(n > 0) {
        this->str=malloc(n+1);
        strncpy(this->str,str,n);
        this->str[n]=0;
      }
    }
  }
</code></pre>
<p>
The second constructor creates a my_string object using the entire string specified.
</p>
<pre><code>
  /* Uses string to initialize object */
  void my_string_ctor_ccs(pointer p,va_list args)
  {
    const char* str=va_arg(args,const char*);
    call_constructor(p,my_string_ctor_ccs_size,str,SIZE_MAX);
  }
</code></pre>
<p>
In the second constructor, notice that a call is made to the first constructor using the call_constructor method.  The default and
copy constructors can be called by using the corresponding method name.  Other constructors (because of the va_list argument) can not.  The call_constructor method 
must be used.  The call_constructor can not be used to call the default or copy constructor.
</p>

<p>
The third constructor initializes a my_string object with n copies of the specified character. 
</p>
<pre><code>
  void my_string_ctor_chr_size(pointer p,va_list args)
  {
    my_string_pointer this=p;
    char c = va_arg(args,int);
    size_t n = va_arg(args,size_t);
    my_string_default_ctor(p);
    if(c && n > 0) {
      this->str=malloc(n+1);
      memset(this->str,c,n);
      this->str[n]=0;
    }
  }
</code></pre>
<p>
The constructors are called using "new_ctor" version of new.
</p>
<pre><code>
  my_string_pointer sp1 = new_ctor(my_string,my_string_ctor_ccs_size,"This is a test.",1024);
  my_string_pointer sp2 = new_ctor(my_string,my_string_ctor_ccs,"This is a test.");
  my_string_pointer sp3 = new_ctor(my_string,my_string_ctor_chr_size,'Y',24);
</code></pre>
<h3>Naming Convention</h3>
<p>
In YAOOC, using the naming convention, the constructor name begins with the class name, followed by "_ctor_", then followed
by any valid C ident characters.  It is suggested that the abbreviations of the argument types be used as the remainder of the name. 
</p>

</div>
</div>
</div>
</body>
</html>