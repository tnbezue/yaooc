<!DOCTYPE html>
<html>
<head>
<title>Type Info</title>
<meta name="generator" content="Bluefish 2.2.10" >
<meta name="copyright" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="expires" content="0">
<link href="yaooc.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="yaooc.js"></script>
</head>
<body>
<div id="wrapper">
<script>header();</script>
<script>menu();</script>
<div id="content" class="content">
<div style="overflow-y: scroll; height:900px">
<p>
In order to properly manage objects, type information has to be maintained for each data type. YAOOC maintains 
a type information structure for each type -- even POD types like char or int.  The type info structure is shown below.
</p>
<pre><code>
  typedef struct type_info_s type_info_t;
  struct type_info_s {
    size_t size;        /* Size of object. */
    void (*default_constructor)(pointer) ;  /* Default constructor */
    void (*destructor)(pointer);  /* Destructor */
    void (*copy_constructor)(pointer,const_pointer);  /* Copy constructor */
    void (*assignment)(pointer,const_pointer);  /* Assignment.  Operator= in C++ */
    bool (*less_than_compare)(const_pointer,const_pointer);  /* less than comparison of two objects. */
    void (*to_stream)(const_pointer,pointer) to_stream_; /* method to write object to stream */
    void (*from_stream)(pointer,pointer) from_stream_; /* method to read object from stream */ 
    const class_table_t* class_table_; /* Class table */
    const type_info_t* parent_;  /* Pointer to parent type info */
  };
</code></pre>
<p>
More on these entries in the chapter on custom classes.  For the hello world program, only the size is needed.  Therefore, the type
info structure for the char type is as follows.
</p>
<pre><code>
  struct type_info __char_ti = {
    sizeof(char_t), /* size of char type = 1 */
    NULL,  /* No default constructor */
    NULL,  /* No destructor */
    NULL,  /* No copy constructor */
    NULL,  /* No assignment method */
    NULL,  /* No comparison function */
    NULL,  /* No to stream method */
    NULL,  /* No from stream method */
    NULL,  /* No class table */
    NULL,  /* No parent */
  };
  const type_info_t* char_ti=&__char_ti;
</code></pre>
<p>
The size must be greater than zero.  The other entries can be NULL.
</p>
<p>
For the hello world program, when new_array is called, it allocates space for 128 characters.  Since there is no default constructor, no initialization
is performed.  Likewise, since a destructor is not defined, the memory is only freed. 
</p>
<h3>Naming Convention</h3>
<p>
The name of the type info structure is the type name prepended with double underscore and appended
with "_ti".  A constant pointer to this structure is also defined using the type name appended with "_ti".
</p>

</div>
</div>
</div>
</body>
</html>