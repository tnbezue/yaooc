<!DOCTYPE html>
<!--
  Copyright (C) 2016-2019  by Terry N Bezue

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<html>
<head>
<title>Inheritance</title>
<meta name="generator" content="Bluefish 2.2.10" >
<meta name="copyright" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="expires" content="0">
<link href="yaooc.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="yaooc.js"></script>
</head>
<body>
<div id="wrapper">
<script>header();</script>
<script>menu();</script>
<div id="content" class="content">
<div style="overflow-y: scroll; height:900px">
<h2>Inheritance</h2>
<p>
For a &quot;%struct&quot;, inheritance is implemented as follows:
</p>
<pre><code>
  %struct class_name : parent_name {
    ...
  };
</code></pre>
<p>
A &quot;%struct&quot; inherits all instance entries of the parent.
</p>
<p>
For &quot;%class&quot;, a parent is required (&quot;%struct&quot; does not require a parent).
If not specified, the parent will be &quot;yaooc_object&quot;.  &quot;yaooc_object&quot; is defined as follows.
</p>
<pre><code>
  %class yaooc_object {
    table:
      void swap(pointer s) { }
  };
</code></pre>

<p>
A class inherits all instance and table members.  Table members can be overriden -- instance members can not.
An overridden method should have the same return type, name, and argument types.
</p>
<p>
For the my_string class, the swap method will be overridden with the following:
</p>
<pre><code>
  %class my_string : yaooc_object {
      ...
    instance:
      ...
    table:
      void swap(pointer o)
      {
        my_string_pointer other=o;  // pointer is a generic pointer, must use my_string_pointer
        char* temp=this-&gt;str;
        this-&gt;str=other-&gt;str;
        other-&gt;str=temp;
      }
  };
</code></pre>
<p>
Note the the swap method uses a generic pointer (void *) as an argument.  A pointer of the appropriate type must be defined.
</p>
<p>
Although possible (if you understand the inter workings of YAOOC),
a struct should not have a class as a parent and a class should not have a struct as a parent.
</p>
<h3>Calling Parent Method</h3>
<p>
For methods defined in the table section of a class, two macros are defined to allow a parent method to be called.<br>
The &quot;super()&quot; macro is used to call the parent method of the same name and arguments.  For example, in the &quot;swap&quot; method
for my_string, &quot;super()&quot; would call the yaooc_object &quot;swap&quot; method.<br>
The &quot;PM&quot; (parent method) macro is used to call any other parent method. It's syntax is &quot;PM(method,args)&quot;
</p>
<h3></h3>
<p>
When a class is inherited from another class, the behaviour of default constructor, destructor, etc is as follows.
</p>
<h3>Default Constructor</h3>
<p>
If a default contructor is defined, YAOOC uses it.  If a default constructor is not defined, YAOOC will traverse
the inheritance tree (parent, grand parent, etc) until a default constructor is found.  If not found, no action
is taken.
</p>
<h3>Destructor</h3>
<p>
When an object is deleted, each destructor in reverse order of inheritance (the child destructor, the parent destructor, the grandparent destructor, etc) will be called
until the root class is reached.  The destrutor should only destory the portion of the object that was
initialized at the current level of inheritance.  The ancestors will destroy their portions.
</p>
<h3>Copy Constructor</h3>
<p>
Like the default constructor, YAOOC will traverse the inheritance tree until a defined copy constructor is found. If not found, then the instance is copied (using memcpy).
</p>
<h3>Assignment</h3>
<p>
Like the copy constructor, YAOOC will traverse the inheritance tree until a defined assignment method is found. If not found, then the instance is copied (using memcpy).
</p>
<h3>Rich compare</h3>
<p>
YAOOC will traverse the inheritance tree until a rich compare method is found.  If none is found, then it would be as if 0 were returned.
</p>
<h3>To/From stream</h3>
<p>
Like rich compare, YAOOC traverses the inheritance tree until a to/from stream method is found.  If none found, then an exception is thrown.
</p>

</div>
</div>
</div>
</body>
</html>
