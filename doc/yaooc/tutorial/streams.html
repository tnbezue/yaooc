<!DOCTYPE html>
<!--
  Copyright (C) 2016-2019  by Terry N Bezue

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<html>
<head>
<title>Input/Output Streams</title>
<meta name="generator" content="Bluefish 2.2.10" >
<meta name="copyright" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="expires" content="0">
<link href="yaooc.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="yaooc.js"></script>
</head>
<body>
<div id="wrapper">
<script>header();</script>
<script>menu();</script>
<div id="content" class="content">
<div style="overflow-y: scroll; height:900px">
<h2>Input/Output Streams</h2>
<p>
One of the most notable C++ features is input and output streams.  For example:
</p>
<pre><code>
  string b="Testing";
  cout &lt;&lt; &quot;The value of \&quot;b\&quot; is &quot; &lt;&lt; b &lt;&lt; endl;
  cout &lt;&lt; &quot;Enter new value for \&quot;b\&quot; &quot; &lt;&lt; endl;
  cin &gt;&gt; b;
</code></pre>
<p>
In YAOOC, this behavior is also implemented.  If a class is to use I/O streams, operators &quot;&lt;&lt;&quot; and &quot;&gt;&gt;&quot;
have to be implemented.  They appear before the &quot;instance:&quot; and &quot;table:&quot; entries.
If the class is used in a stream and operators &quot;&lt;&lt;&quot; and &quot;&gt;&gt;&quot; are not defined,
an exception (more on exceptions later) is thrown.
</p>
<pre><code>
  %class my_string {
      ...
      operator&lt;&lt;(ostrm) {  // ostrm is a pointer to yaooc output stream
        M(ostrm,printf,"%s",this->str);
      }
      operator&gt;&gt;(istrm) {  // istrm is a pointer to yaooc input stream
      {
        char temp[256];
        M(istrm,scanf,"%255s",temp);
        my_string_dtor(this);
        this->str=strdup(temp);
      }
    instance:
      ...
    table:
      ...
  };
</code></pre>

<p>
In the methods above, you may have noticed the use of printf and scanf.  Yes, in YAOOC, streams are a wrapper class for methods that use the C FILE type.
Many of the C methods that use FILE* (printf, scanf, feof, puts, gets, etc) are available in YAOOC streams.  YAOOC provides cout (stdout), cin (stdin), and cerr (stderr)
streams.
</p>
<p>
Now my_string can be used in input and output streams by using the stream method.
</p>
<pre><code>
  my_string_pointer sp1=new(my_string);
  M(cout,printf,"Enter value for sp1\n")
  M(cin,stream,sp1,NULL);
  M(cout,printf,"You entered: ");
  M(cout,stream,sp1,endl,NULL);
</code></pre>
<p>
Notice that for the stream method, NULL is used to indicate the end of argument list. Numerous times I've forgotten the NULL at the end which causes the program to crash.
The STREAM macro provided by YAOOC can be used.  It adds NULL to the end of the argument list.
</p>
<pre><code>
  STREAM(cin,sp1);
  STREAM(cout,sp1,endl);
</code></pre>

<p>
YAOOC provides the following stream classes.
</p>

<div class="divTable">
<div class="divTableBody">
<div class="divTableRow">
<div class="divTableHead">Type</div>
<div class="divTableHead">Input</div>
<div class="divTableHead">Output</div>
</div>
<div class="divTableRow">
<div class="divTableCell">Base stream</div>
<div class="divTableCell">yaooc_istream</div>
<div class="divTableCell">yaooc_ostream</div>
</div>
<div class="divTableRow">
<div class="divTableCell">File</div>
<div class="divTableCell">yaooc_ifstream</div>
<div class="divTableCell">yaooc_ofstream</div>
</div>
<div class="divTableRow">
<div class="divTableCell">String</div>
<div class="divTableCell">yaooc_istringstream</div>
<div class="divTableCell">yaooc_ostringstream</div>
</div>
</div>
</div>



</div>
</div>
</div>
</body>
</html>
