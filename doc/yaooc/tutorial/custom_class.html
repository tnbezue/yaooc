<!DOCTYPE html>
<!--
  Copyright (C) 2016-2019  by Terry N Bezue

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<html>
<head>
<title>Custom Class</title>
<meta name="generator" content="Bluefish 2.2.10" >
<meta name="copyright" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="expires" content="0">
<link href="yaooc.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="yaooc.js"></script>
</head>
<body>
<div id="wrapper">
<script>header();</script>
<script>menu();</script>
<div id="content" class="content">
<div style="overflow-y: scroll; height:900px">
<h2>Custom Class</h2>
<p>
Over the next few lessons a custom class will be created.  The class will be a simple string class.
This is meant to show the features of YAOOC rather than good programming practice.
</p>
<p>
The simplest class can be defined as follows:
</p>
<pre><code>
  #include &lt;yaooc/new.h&gt;
  #include &lt;stdio.h&gt;

  %struct my_string {
    instance:
      char* str;
  };

  int main(int argc,char* argv[])
  {
    my_string_t* ms = new(my_string);
    ms-&gt;str=strdup("This is a test of my_string");
    /* Do some other stuff with my_string */
    delete(ms);
  }
</code></pre>
<p>
"%struct" specifies the beginning of the class definition. Variables declared following "instance:" will be members
of the object.<br>
The above &quot;%struct&quot; section translates into the following C code.
</p>
<pre><code>
  struct my_string_s {
    char *str;
  };
  typedef struct my_string_s my_string_t;
  typedef my_string_t* my_string_pointer;
  typedef const my_string_t* my_string_const_pointer;
</code></pre>
<p>
Note that the actual type created is the class name (my_string) appended with "_t".
</p>
<p>
Full disclosure, more than the above code is created by &quot;%struct&quot; definition.  The addition
code created is covered in the next few lessons.
</p>
<p>
Of cource the C compiler cannot directly compile the above.  The YAOOCPP preprocessor (yaoocpp) is used to translate
the above into a C header and source file.  The compilation is handled in 2 steps.
</p>
<pre><code>
  yaoocpp my_string.yoc
  gcc -fms-extensions -I/usr/local/include -o my_string my_string.c -Wall
</code></pre>
<p>
You can add the following to your makefiles to translate YOC files into C header and source files.
</p>
<pre><code>
  %.c %.h:%.yoc
    yaoocpp $<
</code></pre>
<p>
More on yaoocpp later.
</p>
<p>
</div>
</div>
</div>
</body>
</html>
