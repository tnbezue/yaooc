<!DOCTYPE html>
<!--
  Copyright (C) 2016-2019  by Terry N Bezue

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<html>
<head>
<title>Comparing Objects</title>
<meta name="generator" content="Bluefish 2.2.10" >
<meta name="copyright" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="expires" content="0">
<link href="yaooc.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="yaooc.js"></script>
</head>
<body>
<div id="wrapper">
<script>header();</script>
<script>menu();</script>
<div id="content" class="content">
<div style="overflow-y: scroll; height:900px">
<h2>Comparing Objects</h2>
<p>
Let's give my_string the ability to compare (==, !=, &lt;, etc) with other my_string objects
</p>
<pre><code>
  %struct my_string {
      ...
      // Used for comparing my_string objects
      // Returns &lt;0 for lhs&lt;rhs; 0 if lhs==rhs; and &gt;0 if lhs&gt;rhs
      int operator&lt;=&gt;(lhs,rhs)
      {
        // lhs and rhs are const pointers to my_string instances
        if(lhs-&lt;str == NULL) {
          if(rhs-&lt;str == NULL)
            return 0; /* both NULL, equal */
          else
            return -1; /* lhs is NULL, rhs is not.  NULL is less than not NULL */
        } else if(rhs-&lt;str == NULL)
          return 1; /* lhs is not NULL, rhs is NULL. non NULL greater than NULL */
        return strcmp(lhs-&lt;str,rhs-&lt;str); /* Both not null, compare the strings */
      }
      ...
    instance:
      char* str;
  };
</code></pre>
<h3>Rich Compare</h3>
<p>
The rich compare method is used to compare object (==,!=,&lt;,&lt;=,&gt;, and &gt;=).  If a rich compare method is not defined,
yaoocpp does not generate one.  Furthermore, any comparisons performed would be as if rich compare returned 0 -- thus all objects
of this type would be equal.
</p>
<p>
As with assignment, traditional camparison operators should not be used to compare objects.  The following table gives the
methods to use for comparisons.
</p>
</p>
<div class="divTable">
<div class="divTableBody">
<div class="divTableRow">
<div class="divTableHead">Description</div>
<div class="divTableHead">Operator</div>
<div class="divTableHead">YAOOC method</div>
</div>
<div class="divTableRow">
<div class="divTableCell">Equal to</div>
<div class="divTableCell">==</div>
<div class="divTableCell">op_eq(p1,p2)</div>
</div>
<div class="divTableRow">
<div class="divTableCell">Not equal to</div>
<div class="divTableCell">!=</div>
<div class="divTableCell">op_ne(p1,p2)</div>
</div>
<div class="divTableRow">
<div class="divTableCell">Less than</div>
<div class="divTableCell"><</div>
<div class="divTableCell">op_lt(p1,p2)</div>
</div>
<div class="divTableRow">
<div class="divTableCell">Less than or equal to</div>
<div class="divTableCell"><=</div>
<div class="divTableCell">op_le(p1,p2)</div>
</div>
<div class="divTableRow">
<div class="divTableCell">Greater than</div>
<div class="divTableCell">></div>
<div class="divTableCell">op_gt(p1,p2)</div>
</div>
<div class="divTableRow">
<div class="divTableCell">Greater than or equal to</div>
<div class="divTableCell">>=</div>
<div class="divTableCell">op_ge(p1,p2)</div>
</div>
</div>
</div>

<p>
The following compares if two my_string objects are equal.
</p>
<pre><code>
  my_string_pointer p1=new(my_string);
  my_string_pointer p2=new(my_string);
  ....
  if(p1==p2) /* Again, valid C but most likely not what was intended */
    { puts(&quot;Equal&quot;); }
  if(op_eq(p1,p2)) /* Will perform comparisons as specified by rich compare method */
    { puts(&quot;Equal&quot;); }
</code></pre>

</div>
</div>
</div>
</body>
</html>
